/*
 * Floatplane REST API
 *
 * The version of the OpenAPI document: 3.9.9
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

using System;
using System.IO;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Reflection;
using RestSharp;
using Xunit;
using Xunit.Extensions;

using FloatplaneAPIClientCSharp.Client;
using FloatplaneAPIClientCSharp.Api;
using FloatplaneAPIClientCSharp.Model;

namespace FloatplaneAPIClientCSharp.Test.Api
{
	/// <summary>
	///  Class for testing ContentV3Api
	/// </summary>
	/// <remarks>
	/// This file is automatically generated by OpenAPI Generator (https://openapi-generator.tech).
	/// Please update the test case below to test the API endpoint.
	/// </remarks>
	public class ContentV3ApiTests : IDisposable
	{
		private ContentV3Api instance;

		public ContentV3ApiTests()
		{
			instance = new ContentV3Api();
			ApiTestHelper.SetStrictSerializerSettings(instance, instance.Client);
		}

		public void Dispose()
		{
			// Cleanup when everything is done.
		}

		/// <summary>
		/// Test DislikeContent
		/// </summary>
		[Fact]
		public void DislikeContentTest()
		{
			// TODO uncomment below to test the method and replace null with proper value
			//ContentLikeV3Request contentLikeV3Request = null;
			//var response = instance.DislikeContent(contentLikeV3Request);
			//Assert.IsType<List<string>>(response);
		}

		/// <summary>
		/// Test GetBlogPost
		/// </summary>
		[Fact]
		public void GetBlogPostTest()
		{
			IReadOnlyList<string> ids = ApiTestSampleData.AllPosts;
			foreach (var id in ids)
			{
				var response = instance.GetBlogPostWithHttpInfo(id);
				Assert.Null(response.ErrorText);
				Assert.IsType<ContentPostV3Response>(response.Data);
				Assert.Equal(id, response.Data?.Id);
			}
		}

		[Fact]
		public void GetBlogPostNotExistentTest()
		{
			var apiException = Assert.Throws<ApiException>(() => {
				string id = ApiTestSampleData.NonExistentIdentifer;
				var response = instance.GetBlogPostWithHttpInfo(id);
			});
			Assert.NotNull(apiException.ErrorContent);
			Assert.Equal((int)System.Net.HttpStatusCode.Forbidden, apiException.ErrorCode);

			ApiTestHelper.ValidateErrorModel(ApiTestHelper.GetErrorModel(apiException));
		}

		/// <summary>
		/// Test GetContentTags
		/// </summary>
		[Fact]
		public void GetContentTagsTest()
		{
			List<string> creatorIds = new List<string>()
			{
				ApiTestSampleData.LttCreatorId,
			};
			var response = instance.GetContentTagsWithHttpInfo(creatorIds);
			Assert.Null(response.ErrorText);
			Assert.IsType<Dictionary<string, int>>(response.Data);
			Assert.True(response.Data?.Any());
		}

		[Fact]
		public void GetContentTagsNonExistentTest()
		{
			var apiException = Assert.Throws<ApiException>(() => {
				List<string> creatorIds = new List<string>()
				{
					ApiTestSampleData.NonExistentIdentifer,
				};
				var response = instance.GetContentTagsWithHttpInfo(creatorIds);
			});
			Assert.NotNull(apiException.ErrorContent);
			Assert.Equal((int)System.Net.HttpStatusCode.InternalServerError, apiException.ErrorCode);

			ApiTestHelper.ValidateErrorModel(ApiTestHelper.GetErrorModel(apiException));
		}

		/// <summary>
		/// Test GetCreatorBlogPosts
		/// </summary>
		[Fact]
		public void GetCreatorBlogPostsTest()
		{
			string id = ApiTestSampleData.LttCreatorId;
			int? limit = null;
			int? fetchAfter = null;
			string? search = null;
			List<string>? tags = null;
			bool? hasVideo = null;
			bool? hasAudio = null;
			bool? hasPicture = null;
			bool? hasText = null;
			string? sort = null;
			int? fromDuration = null;
			int? toDuration = null;
			DateTimeOffset? fromDate = null;
			DateTimeOffset? toDate = null;
			var response = instance.GetCreatorBlogPostsWithHttpInfo(id, limit, fetchAfter, search, tags, hasVideo, hasAudio, hasPicture, hasText, sort, fromDuration, toDuration, fromDate, toDate);
			Assert.Null(response.ErrorText);
			Assert.IsType<List<BlogPostModelV3>>(response.Data);
			Assert.True(response.Data?.Any());
		}

		[Fact]
		public void GetCreatorBlogPostsNonExistentTest()
		{
			var apiException = Assert.Throws<ApiException>(() => {
				string id = ApiTestSampleData.NonExistentIdentifer;
				int? limit = null;
				int? fetchAfter = null;
				string? search = null;
				List<string>? tags = null;
				bool? hasVideo = null;
				bool? hasAudio = null;
				bool? hasPicture = null;
				bool? hasText = null;
				string? sort = null;
				int? fromDuration = null;
				int? toDuration = null;
				DateTimeOffset? fromDate = null;
				DateTimeOffset? toDate = null;
				var response = instance.GetCreatorBlogPostsWithHttpInfo(id, limit, fetchAfter, search, tags, hasVideo, hasAudio, hasPicture, hasText, sort, fromDuration, toDuration, fromDate, toDate);
			});
			Assert.NotNull(apiException.ErrorContent);
			Assert.Equal((int)System.Net.HttpStatusCode.InternalServerError, apiException.ErrorCode);

			ApiTestHelper.ValidateErrorModel(ApiTestHelper.GetErrorModel(apiException));
		}

		/// <summary>
		/// Test GetMultiCreatorBlogPosts
		/// </summary>
		[Fact]
		public void GetMultiCreatorBlogPostsTest()
		{
			List<string> ids = new List<string>()
			{
				ApiTestSampleData.LttCreatorId,
			};
			int limit = 20;
			List<ContentCreatorListLastItems>? fetchAfter = null;
			var response = instance.GetMultiCreatorBlogPostsWithHttpInfo(ids, limit, fetchAfter);
			Assert.Null(response.ErrorText);
			Assert.IsType<ContentCreatorListV3Response>(response.Data);
			Assert.True(response.Data?.BlogPosts.Any());
		}

		[Fact]
		public void GetMultiCreatorBlogPostsNonExistentTest()
		{
			var apiException = Assert.Throws<ApiException>(() => {
				List<string> ids = new List<string>()
				{
					ApiTestSampleData.NonExistentIdentifer,
				};
				int limit = 20;
				List<ContentCreatorListLastItems>? fetchAfter = null;
				var response = instance.GetMultiCreatorBlogPostsWithHttpInfo(ids, limit, fetchAfter);
			});
			Assert.NotNull(apiException.ErrorContent);
			Assert.Equal((int)System.Net.HttpStatusCode.InternalServerError, apiException.ErrorCode);

			ApiTestHelper.ValidateErrorModel(ApiTestHelper.GetErrorModel(apiException));
		}

		/// <summary>
		/// Test GetPictureContent
		/// </summary>
		[Fact]
		public void GetPictureContentTest()
		{
			string id = ApiTestSampleData.Picture_New;
			var response = instance.GetPictureContentWithHttpInfo(id);
			Assert.Null(response.ErrorText);
			Assert.IsType<ContentPictureV3Response>(response.Data);
			Assert.Equal(id, response.Data?.Id);

			id = ApiTestSampleData.Picture_Old;
			response = instance.GetPictureContentWithHttpInfo(id);
			Assert.Null(response.ErrorText);
			Assert.IsType<ContentPictureV3Response>(response.Data);
			Assert.Equal(id, response.Data?.Id);
		}

		[Fact]
		public void GetPictureContentNonExistentTest()
		{
			var apiException = Assert.Throws<ApiException>(() => {
				string id = ApiTestSampleData.NonExistentIdentifer;
				var response = instance.GetPictureContentWithHttpInfo(id);
			});
			Assert.NotNull(apiException.ErrorContent);
			Assert.Equal((int)System.Net.HttpStatusCode.Forbidden, apiException.ErrorCode);

			ApiTestHelper.ValidateErrorModel(ApiTestHelper.GetErrorModel(apiException));
		}

		/// <summary>
		/// Test GetRelatedBlogPosts
		/// </summary>
		[Fact]
		public void GetRelatedBlogPostsTest()
		{
			string id = ApiTestSampleData.Post_Video_New;
			var response = instance.GetRelatedBlogPostsWithHttpInfo(id);
			Assert.Null(response.ErrorText);
			Assert.IsType<List<BlogPostModelV3>>(response.Data);
			Assert.True(response.Data?.Any());
		}

		[Fact]
		public void GetRelatedBlogPostsNonExistentTest()
		{
			var apiException = Assert.Throws<ApiException>(() => {
				string id = ApiTestSampleData.NonExistentIdentifer;
				var response = instance.GetRelatedBlogPostsWithHttpInfo(id);
			});
			Assert.NotNull(apiException.ErrorContent);
			Assert.Equal((int)System.Net.HttpStatusCode.Forbidden, apiException.ErrorCode);

			ApiTestHelper.ValidateErrorModel(ApiTestHelper.GetErrorModel(apiException));
		}

		/// <summary>
		/// Test GetVideoContent
		/// </summary>
		[Fact]
		public void GetVideoContentTest()
		{
			string id = ApiTestSampleData.Video_New;
			var response = instance.GetVideoContentWithHttpInfo(id);
			Assert.Null(response.ErrorText);
			Assert.IsType<ContentVideoV3Response>(response.Data);
			Assert.Equal(id, response.Data?.Id);

			id = ApiTestSampleData.Video_Old;
			response = instance.GetVideoContentWithHttpInfo(id);
			Assert.Null(response.ErrorText);
			Assert.IsType<ContentVideoV3Response>(response.Data);
			Assert.Equal(id, response.Data?.Id);
		}

		[Fact]
		public void GetVideoContentNonExistentTest()
		{
			var apiException = Assert.Throws<ApiException>(() => {
				string id = ApiTestSampleData.NonExistentIdentifer;
				var response = instance.GetVideoContentWithHttpInfo(id);
			});
			Assert.NotNull(apiException.ErrorContent);
			Assert.Equal((int)System.Net.HttpStatusCode.Forbidden, apiException.ErrorCode);

			ApiTestHelper.ValidateErrorModel(ApiTestHelper.GetErrorModel(apiException));
		}

		/// <summary>
		/// Test LikeContent
		/// </summary>
		[Fact]
		public void LikeContentTest()
		{
			// TODO uncomment below to test the method and replace null with proper value
			//ContentLikeV3Request contentLikeV3Request = null;
			//var response = instance.LikeContent(contentLikeV3Request);
			//Assert.IsType<List<string>>(response);
		}

		[Fact]
		public void UpdateProgressTest()
		{
			var updateProgressRequest = new UpdateProgressRequest(
				id: ApiTestSampleData.Video_New,
				contentType: UpdateProgressRequest.ContentTypeEnum.Video,
				progress: 10
			);
			var response = instance.UpdateProgressWithHttpInfo(updateProgressRequest);
			Assert.Null(response.ErrorText);
			Assert.IsType<string>(response.Data);
			Assert.Equal("OK", response.Data);
		}

		[Fact]
		public void GetProgressTest()
		{
			var getProgressRequest = new GetProgressRequest(
				ids: new List<string>
				{
					ApiTestSampleData.Post_Video_New,
				},
				contentType: GetProgressRequest.ContentTypeEnum.BlogPost
			);
			var response = instance.GetProgressWithHttpInfo(getProgressRequest);
			Assert.Null(response.ErrorText);
			Assert.IsType<List<GetProgressResponseInner>>(response.Data);
			Assert.Equal(1, response.Data?.Count());
		}
	}
}
